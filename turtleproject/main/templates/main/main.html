{% extends 'main/nav_bar.html' %}
{% load static %}

{% block params %}
    <title>–ì–ª–∞–≤–Ω–∞—è</title>
    <link href="{% static 'main/css/main.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'users/css/login_or_registration.css' %}" rel="stylesheet" type="text/css"/>
    <script src="{% static 'works/js/likes.js' %}"></script>
    <script src="{% static 'main/js/news.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="hero-section">
        <h1 class="hero-title">Turtle</h1>
        <p class="hero-subtitle">–ò–∑—É—á–∞–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —á–µ—Ä–µ–ø–∞—à–∫–æ–π!</p>
        <a href="{% url 'lessons' %}" class="hero-button">–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ</a>
    </div>

    <div class="content-section">
        <div class="news-section">
            <h2>–ù–æ–≤–æ—Å—Ç–∏</h2>
            <div class="news-list">
                {% for new in news %}
                    <div class="news-item" data-news-id="{{ new.id }}">
                        <div class="news-header">
                            <h3>{{ new.title }}</h3>
                            <span class="news-date">{{ new.date }}</span>
                            <span class="news-arrow">‚ñº</span>
                        </div>
                        <p class="news-preface">{{ new.preface }}</p>

                        <div class="news-full-content">
                            {% if new.image %}
                                <img src="{{ new.image.url }}" alt="{{ new.title }}" class="news-image">
                            {% endif %}
                            <div class="news-text">{{ new.text|linebreaks }}</div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="popular-works-section">
            <h2>–¢–û–ü-10 —Ä–∞–±–æ—Ç</h2>

            <div class="works-grid">
                {% for work in works %}
                    <div class="work-card" data-work-id="{{ work.id }}">
                        <a href="{% url 'work_detail' work.id %}" data-work-id="{{ work.id }}">
                            <img src="{{ work.image.url }}" alt="{{ work.title }}" class="work-image">
                        </a>
                            <div class="work-details">
                                <p class="work-title">{{ work.title }}</p>
                                <p class="work-author">–ê–≤—Ç–æ—Ä: {{ work.author }}</p>
                                <p class="work-time">{{ work.datetime }}</p>

                                <div class="work-stats">
                                    <span class="like-icon {% if work.user_has_liked %}liked{% endif %}"
                                          data-work-id="{{ work.id }}"
                                          {% if not request.user.is_authenticated %}data-unauth="true"{% endif %}>
                                          {% if work.user_has_liked %}‚ù§Ô∏è{% else %}ü§ç{% endif %}
                                    </span>
                                    <span class="likes-count" data-work-id="{{ work.id }}">{{ work.likes }}</span>
                                    <span class="comments-count">üí¨ {{ work.comments_count }}</span>
                                </div>
                            </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <p>–°—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.</p>
            <a href="{% url 'entrance' %}" class="modal-register-btn">–í–æ–π—Ç–∏</a>
            <a href="{% url 'register' %}" class="modal-register-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
        </div>
    </div>
{% endblock %}